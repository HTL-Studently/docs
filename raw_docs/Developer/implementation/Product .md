# Product creation and management

## Creation 

Creating a product template is done by calling the `POST /product` endpoint. This endpoint allows for the creation of a new product in the system. It requires an authorization token to be provided either in the `Authorization` header or as a cookie named `accessToken`. The product details are passed in the request body as an instance of `APIProduct`. This instance is then saved into the database. 

## Searching

The act of sorting through products should mostly be done in the frontend. The endpoint supports searching for products by id to gather individual products. The feature of fetching products by author-id has yet to be implemented. 

## Individual Products

Product templates are used to design a *"master"* product, while the products actually hold by the students individually are created directly after creating the template. The *target* tag of the template is used to assign a individuall instance to every user targeted. For this purpose, a username or displayname might need translation from the cleartext name itself to the id of said group or user. After a rewright of the initial database filling, where the step of fetching and assigning the id of the group to the class object has been taken, this feature became temporarily unused. It will be needed again to translate individually targeted students, where only the name of the person is known to the operator, need to be translated to their id.

## Payment confirmation

For financial reasons, using a payment service like PayPal is not possible. The only option left open by this is having the users transfer the money directly to the bank and upload a payment confirmation if possible. These confirmations are PDFs generated by the service used for the transaction. 

These PDFs can then be converted into Base64 py the frontend.
```js
const base64pdf = await new Promise((resolve, reject) => {
    reader.onloadend = function() {
        resolve(reader.result); // 
    };
    reader.onerror = function(error) {
        reject(error);
    };
    reader.readAsDataURL(file);
});
```

THis Base64 string is then uploaded to the to the API and stored into the *confirmation* field of the individual product object. 
